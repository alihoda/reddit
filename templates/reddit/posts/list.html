{% extends 'reddit/base.html' %}
{% load post_tags %}


{% block title %}Posts{% endblock title %}
<p class="text-muted">{% total_published_posts %} posts</p>

{% block content %}
<div class="row">
  <div class="col-md-8">
    <div class="row row-cols-1 row-cols-md-3 g-4">
      {% for post in posts %}
      <div class="col">
        <div class="card h-100">
          <div class="card-body">
            <h5 class="card-title"><a href={{post.get_absolute_url}} class="card-link">{{post.title}}</a></h5>
            <p class="card-text">{{post.body|markdown|truncatewords_html:10}}</p>
            {% for tag in post.tags.all %}
            <a href="{% url 'posts:tag_post_list' tag.slug %}" <span class="badge bg-primary">{{tag}}</span></a>
            {% endfor %}
          </div>

          <div class="card-footer">
            <small class="text-muted ">Published {{post.publish}} by {{post.author}}</small>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  <div class="col-md-4">{% published_posts %}</div>
</div>
<br />
{% include 'reddit/includes/pagination.html' with page=page_obj %}
{% endblock content %}